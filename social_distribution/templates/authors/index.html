{% extends 'authors/base.html' %}
{% block block_body %}
    <div class="margins center">

        	<!-- Testing -->
    {% if user.is_authenticated %}
        <h1>Hello {{ user.username }}!</h1>
    {% else %}
        <p>Hello World! Click <a href="/login/">here</a> to login</p>
    {% endif %}

    <br/>
    <h3>View Author Profile:
    <select id="selectbox" onchange="javascript:location.href = this.value;">
        <option>Select User</option>
        {% for users in list_of_users %}
            <option value="author/{{ users.username }}">
                {{users.username}}
            </option>
        {% endfor %}
    </select>
    </h3>

    <br/>
    <h3>View Posts by Author:
    <select id="selectbox" onchange="javascript:location.href = this.value;">
        <option>Select User</option>
        {% for users in list_of_users %}
            <option value="author/{{ users.username }}/posts">
                {{users.username}}
            </option>
        {% endfor %}
    </select>
    </h3>
	<!-- End Testing -->
    {% if user.is_authenticated %}

    <br/>
    {% for post in list_of_posts %}
        <div>
         Title: {{post.title}}
        </div>
        <div>
            Body: {{post.post_text|safe|escape}}
        </div>

        {% if post.image %}
            <div>
                <img src="/static/{{post.image}}" alt="{{post.image}}" height="100" width="100"/>
            </div>
        {% endif %}

        {% if post.author.user = user %}
        <div>
            Privacy: {{post.privacy}}
        </div>
	<div class="button-container">
	<form id="delete_post" method="post" action="/delete/post/{{post.id}}">
            {% csrf_token %}
            <input class="btn btn-danger btn-sm" type="submit" value="Delete" />
        </form>
        <form id="edit_post" method="get" action="/edit/post/{{post.id}}">
            {% csrf_token %}
           <input class="btn btn-warning btn-sm" type="submit" value="Edit" />
        </form>
	<form id="expand_post" method="get" action="/posts/{{post.id}}/">
            {% csrf_token %}
	<input class="btn btn-success btn-sm" type="submit" value="Expand" />
        </form>
	<br/>
	<br/>
	</div>


        {% else %}
        <div>
            Author: {{post.author}}
        </div>
	<div>
        <form id="expand_post" method="get" action="/posts/{{post.id}}/">
            {% csrf_token %}
	<input class="btn btn-success btn-sm" type="submit" value="Expand" />
        </form>
        <br/><br/>

        </div>
        {% endif %}

    {% endfor %}

    {% endif %}
    </div>
{% endblock %}
